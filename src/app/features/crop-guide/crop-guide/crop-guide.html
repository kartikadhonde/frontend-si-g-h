<div class="page stack-lg">
	<div class="text-center stack-md">
		<h1 class="heading-xl">Crop & Fertilization Guide</h1>
		<p class="lead">Comprehensive cultivation recommendations for various crops with detailed fertilization schedules</p>
	</div>

	<div class="filters">
		<div class="input-with-icon">
			<input [ngModel]="searchTerm()" (ngModelChange)="searchTerm.set($event)" placeholder="Search crops..." class="input" />
			<span class="input-icon" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg></span>
		</div>
		<div class="categories">
			<button *ngFor="let cat of categories" (click)="selectedCategory.set(cat.id)" class="btn" [ngClass]="selectedCategory()===cat.id ? 'btn-secondary' : 'btn-outline'">{{ cat.name }}</button>
		</div>
	</div>

	<div class="text-small text-muted">Showing {{ filteredCrops().length }} of {{ crops.length }} crops</div>

	<div class="grid-three">
		<div *ngFor="let crop of filteredCrops()" class="card-elegant crop-card">
			<div class="crop-thumb">
				<img [src]="'/' + crop.image" [alt]="crop.name" class="crop-image" />
				<div class="chip-floating text-small">{{ categoryName(crop.category) }}</div>
			</div>
			<div class="card-padding stack-md">
				<div class="stack-sm">
					<div class="title">{{ crop.name }}</div>
					<div class="text-small text-muted"><span class="label">Season:</span> <span>{{ crop.season }}</span></div>
				</div>
				<div class="grid-compact">
					<div class="stat-box">
						<div class="text-small text-muted">Temp</div>
						<div class="stat-value">{{ crop.temperature }}</div>
					</div>
					<div class="stat-box">
						<div class="text-small text-muted">Water</div>
						<div class="stat-value">{{ crop.waterRequirement }}</div>
					</div>
				</div>
				<details>
					<summary class="summary-toggle">View Details</summary>
					<div class="stack-sm details-content">
						<div>
							<h5 class="text-meta">Soil & Climate</h5>
							<p class="text-small text-muted">{{ crop.soilType }}</p>
							<p class="text-small text-muted">{{ crop.climate }}</p>
						</div>
						<div>
							<h5 class="text-meta">Fertilization</h5>
							<div class="fertilization-box">
								<div><span class="label">NPK:</span> {{ crop.fertilization.npk }}</div>
								<div><span class="label">Organic:</span> {{ crop.fertilization.organic }}</div>
								<div><span class="label">Micronutrients:</span> {{ crop.fertilization.micronutrients }}</div>
							</div>
						</div>
					</div>
				</details>
			</div>
		</div>
	</div>

	<div *ngIf="!filteredCrops().length" class="text-center empty">
		<p class="text-muted">No crops found matching your criteria.</p>
		<button (click)="searchTerm.set(''); selectedCategory.set('all')" class="btn btn-outline">Clear Filters</button>
	</div>
</div>
