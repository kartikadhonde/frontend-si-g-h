<div class="panel prediction-form">
  <form [formGroup]="form" (ngSubmit)="submit()" class="prediction-form__body">
    <div class="prediction-form__intro">
      <h3 class="prediction-form__title">Yield Prediction</h3>
      <p class="prediction-form__subtitle">Enter field & crop details to get an AI prediction</p>
    </div>

    <div class="prediction-form__grid">
      <div class="form-field">
        <label class="field-label">Farm Location <span class="required-indicator">*</span></label>
        <input type="text" formControlName="farmLocation" class="input" placeholder="e.g. Ludhiana, Punjab" />
        <div class="field-error" *ngIf="form.get('farmLocation')?.invalid && form.get('farmLocation')?.touched">Location is required (min 2 chars)</div>
      </div>
      <div class="form-field">
        <label class="field-label">Crop Type <span class="required-indicator">*</span></label>
        <select formControlName="cropType" class="select">
          <option value="">Select crop</option>
          <option *ngFor="let c of crops" [value]="c">{{ c | titlecase }}</option>
        </select>
        <div class="field-error" *ngIf="form.get('cropType')?.invalid && form.get('cropType')?.touched">Crop type required</div>
      </div>
      <div class="form-field">
        <label class="field-label">Soil Type <span class="required-indicator">*</span></label>
        <input type="text" formControlName="soilType" class="input" placeholder="e.g. Loamy" />
        <div class="field-error" *ngIf="form.get('soilType')?.invalid && form.get('soilType')?.touched">Soil type required</div>
      </div>
      <div class="form-field">
        <label class="field-label">Acreage (ha) <span class="required-indicator">*</span></label>
        <input type="number" step="0.01" formControlName="acreage" class="input" placeholder="e.g. 3.5" />
        <div class="field-error" *ngIf="form.get('acreage')?.invalid && form.get('acreage')?.touched">Enter valid acreage</div>
      </div>
      <div class="form-field form-field--full">
        <label class="field-label">Sowing Date <span class="required-indicator">*</span></label>
        <input type="date" formControlName="sowingDate" class="input" />
        <div class="field-error" *ngIf="form.get('sowingDate')?.invalid && form.get('sowingDate')?.touched">Sowing date required</div>
      </div>
    </div>

    <div class="form-actions">
      <button type="submit" [disabled]="form.invalid || isSubmitting()" class="btn btn-secondary">
        <span *ngIf="!isSubmitting()">Predict Yield</span>
        <span *ngIf="isSubmitting()" class="loading-inline">
          <span class="spinner"></span>
          Predicting...
        </span>
      </button>
      <button type="button" (click)="form.reset();" class="btn btn-outline btn-xs">Reset</button>
    </div>
  </form>
</div>
