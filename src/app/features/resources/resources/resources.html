<div class="page resources-page stack-xl">
  <!-- Header -->
  <header class="resources-header stack-md text-center">
    <span class="badge badge-secondary text-meta">Knowledge Hub</span>
    <h1 class="heading-xl"> <span class="gradient-hero">Resources</span> & Learning</h1>
    <p class="lead">Access our comprehensive library of farming guides, tutorials, research papers, and tools</p>
  </header>

  <!-- Search & Categories -->
  <div class="resources-filters row-responsive">
    <div class="resources-search">
      <input type="text" class="input search-input" placeholder="Search resources, topics, or tags..." [ngModel]="searchTerm()" (ngModelChange)="searchTerm.set($event)" />
      <span class="search-icon">🔍</span>
    </div>
    <div class="category-chips">
      <button *ngFor="let category of categories" (click)="setCategory(category.id)" class="chip" [class.chip--active]="selectedCategory() === category.id">
        {{ category.name }}
        <span class="chip__count">{{ category.count }}</span>
      </button>
    </div>
  </div>

  <!-- Results count -->
  <div class="results-count text-small text-muted">Showing {{ filteredResources().length }} of {{ resources.length }} resources</div>

  <!-- Featured -->
  <section *ngIf="selectedCategory() === 'all' && !searchTerm()" class="featured-resources stack-md">
    <h2 class="heading-section">Featured Resources</h2>
    <div class="grid-three resources-grid">
      <ng-container *ngFor="let resource of resources">
        <article *ngIf="resource.featured" class="resource-card resource-card--featured">
          <div class="resource-card__head">
            <div class="resource-card__type" [ngClass]="getTypeColor(resource.type)">
              {{ getTypeIcon(resource.type) }} {{ resource.type }}
            </div>
            <button class="bookmark" aria-label="Bookmark resource">🔖</button>
          </div>
          <h3 class="resource-card__title">{{ resource.title }}</h3>
          <p class="resource-card__desc">{{ resource.description }}</p>
          <div class="resource-card__meta">
            <span class="meta-item">👤 {{ resource.author }}</span>
            <span class="meta-item">📅 {{ resource.date | date:'MM/dd/yyyy' }}</span>
          </div>
          <div class="resource-card__stats">
            <span class="duration">{{ resource.duration }}</span>
            <span class="downloads">{{ resource.downloads }} downloads</span>
          </div>
          <div class="tags">
            <ng-container *ngFor="let tag of resource.tags; let i = index">
              <span *ngIf="i < 3" class="tag">{{ tag }}</span>
            </ng-container>
            <span *ngIf="resource.tags.length > 3" class="tag tag--more">+{{ resource.tags.length - 3 }}</span>
          </div>
          <button class="btn btn-secondary btn-block">Access Resource ➡️</button>
        </article>
      </ng-container>
    </div>
  </section>

  <!-- All Resources -->
  <section class="stack-md all-resources">
    <h2 class="heading-section">{{ selectedCategoryName() }}</h2>
    <div class="grid-two">
      <article *ngFor="let resource of filteredResources()" class="resource-card">
        <div class="resource-card__head">
          <div class="resource-card__type" [ngClass]="getTypeColor(resource.type)">{{ getTypeIcon(resource.type) }} {{ resource.type }}</div>
          <span *ngIf="resource.featured" class="badge badge-soft">Featured</span>
        </div>
        <h3 class="resource-card__title">{{ resource.title }}</h3>
        <p class="resource-card__desc">{{ resource.description }}</p>
        <div class="resource-card__info">
          <div class="info-left">
            <span class="meta-item">👤 {{ resource.author }}</span>
            <span class="meta-item">📅 {{ resource.date | date:'MM/dd/yyyy' }}</span>
          </div>
          <div class="downloads">{{ resource.downloads }} downloads</div>
        </div>
        <div class="resource-card__footer">
          <span class="duration">{{ resource.duration }}</span>
          <button class="btn btn-outline btn-sm">Access ➡️</button>
        </div>
      </article>
    </div>
  </section>

  <div *ngIf="filteredResources().length === 0" class="empty-state">
    <p>No resources found matching your criteria.</p>
    <button (click)="clearFilters()" class="btn btn-outline">Clear Filters</button>
  </div>

  <!-- Newsletter -->
  <section class="newsletter panel">
    <div class="newsletter__inner text-center">
      <h2 class="heading-section">Stay Updated with Latest Resources</h2>
      <p class="lead small-lead">Subscribe to our newsletter and get notified when we publish new guides, research papers, and farming tools.</p>
      <form class="newsletter__form" (submit)="$event.preventDefault()">
        <input placeholder="Enter your email" class="input" />
        <button class="btn btn-secondary">Subscribe</button>
      </form>
    </div>
  </section>
</div>
